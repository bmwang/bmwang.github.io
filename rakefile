desc "Parse haml layouts"
task :haml do
  print "Parsing Haml layouts..."
  system(%{
    cd _layouts/ && 
    for f in *.haml; do [ -e $f ] && haml --style ugly $f ${f%.haml}.html; done
  })
  puts "done."
end

desc "Parse sass layouts"
task :sass do
  print "Parsing Sass layouts..."
  system(%{
    cd stylesheets/ && 
    for f in *.sass; do [ -e $f ] && sass $f ${f%.sass}.css; done
  })
  puts "done."
end


desc "Launch preview environment"
task :preview => [:haml, :sass, :clean] do
  system "jekyll --auto --server"
end

desc "Build site"
task :build => [:haml, :sass, :clean] do |task, args|
  system "jekyll"
end

desc "Build non-native things for Jekyll"
task :nonnative => [:haml, :sass] do |task, args|
end

task :clean do
  system "rm -rf _site"
end
